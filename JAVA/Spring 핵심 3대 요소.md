## Spring 핵심 3대 요소

- 제어의 역전(IoC, Inversion of Control)
- 관점 지향 프로그래밍(AOP, Aspect Oriented Programming)
- 서비스 추상화(PSA, Portable Service Abstraction)

<br>

## **1. 제어의 역전(IoC, Inversion of Control)**

스프링 프레임워크에서는 주입 대상이 되는 의존성 객체를 Bean이라고 한다. 처음 프로젝트가 실행될 때 Bean을 생성하여 Bean 컨테이너에서 관리하게 되고, 이후 필요시 컨테이너로부터 Bean을 주입받아 활용한다.

이러한 방식은 Bean 객체의 생성 및 소멸을 개발자가 아닌 프레임워크가 주도하게 함으로써, Singleton Pattern의 특징에서 알 수 있듯 빈번한 객체서 생성 및 소멸로 인한 자원 낭비를 줄이고 재사용성을 높인다는 이점이 있다.

이렇게 메소드나 객체의 호출을 개발자가 결정하지 않고, 프레임워크가 결정하는 것을 제어의 역전이라고 한다.

※ 의존성 주입을 받으려면 Bean으로 등록되어 있어야 한다.

**Bean의 실행 과정**

- 객체 생성
- 의존성 객체 주입
  - 필드 인스턴스, Setter, 생성자를 통한 주입
  - @Autowired 선언하여 프레임워크가 아닌 컨테이너에서 선언된 객체 타입과 일치하는 Bean을 찾아 주입
- 의존성 객체 메소드 호출

  <br>

**1.1. Spring IoC Container**  
 객체를 생성하고 관리하고 책임지고 의존성을 관리해주는 컨테이너

- BeanFactory
- 어플리케이션 컴포넌트의 중앙 저장소
- Bean 설정 소스로부터 정의를 읽어들이고, Bean을 구성하고 제공

- IoC 컨테이너는 객체의 생성을 책임지고, 의존성을 관리함
- POJO의 생성, 초기화, 소멸에 대한 권한을 가짐
  - POJO: 주로 특정 자바 모델이나 기능, 프레임워크를 따르지 않은 Java Object를 지칭  
    (ex: getter, setter)

**장점**

- 개발자는 비즈니스 로직에 집중할 수 있음
- 객체 생성 코드가 없으므로 TDD에 용이

  <br>

**1.2. Spring Bean**  
 스프링에서는 객체를 Bean이라고 부르며, 프로젝트가 실행될 때 사용자가 Bean으로 관리하는 객체들의 생성과 소멸에 관련된 작업을 자동적으로 수행해주는데 객체가 생성되는 곳을 스프링에서는 Bean 컨테이너라고 부른다.

ex) @Service, @Repository 등 Spring Annotation들을 Bean이라고 함

**장점**

- 스코프
  - 싱글톤: 하나만 만들어 사용
  - 프로토타입: 매번 다른 객체를 만들어 사용

※ 기본적으로 Bean을 등록할때 아무런 Annotation을 붙이지 않았다면 그 Bean들은 모두 Singleton으로 등록되게 된다.

<br>

**1.3. 의존성 주입(DI, Dependency Injection)**  
 객체 간의 의존성을 자신이 아닌 외부에서 주입하는 것이다.

**사용 방법**

- Setter 사용

```Java
B b = new B();
A a = new A();

a.setB(b);
```

- 생성자 사용

```Java
B b = new B(a);
A a = new A();
```

**장점**

- 클래스들 간 의존 관계를 최소화 할 수 있음
- 유지보수 용이

<br>

## **2. 관점 지향 프로그래밍(AOP, Aspect Oriented Programming)**

공통된 로직을 추출하여 메소드의 다양한 시점에서 실행할 수 있게 해주며, 코드를 줄요주고 개발자가 공통 로직을 배제하고 핵심 관심사에 집중할 수 있도록 해준다.  
 즉, 공통으로 쓰이는 부분의 코드를 @Aspect 어노테이션을 통해 추출하여 특정 메소드가 호출될 때 특정 시점에 동작하도록 할 수 있다.

- 활용 방법: A가 개발한 공통단을 B, C등 다른 개발자가 재사용 할 수 있다. (ex: 메소드 속도 측정)
- @Transactional 어노테이션이 붙은 함수는 자동적으로 try catch가 감싸져 예외가 발생하면 해당 동작이 실행되지 이전 시점으로 롤백 시켜준다.

<br>

## **3. 서비스 추상화(PSA, Portable Service Abstraction)**

기술에 대해 공통으로 사용할 수 있게 추상화된 레이어를 제공하고 있다는 의미이다. 예를 들어 MVC 구조로 개발된 프로젝트를 WebFlux로 전환한다고 하더라도 Spring 기반의 인터페이스로 작성 하였다면 어노테이션들을 굳이 바꿔주지 않아도 된다.  
 이외에도 Transactional 어노테이션 역시 JPA를 사용하든 JDBC를 사용하든 변경할 필요가 없다.
